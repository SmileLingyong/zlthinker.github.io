<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>Geometry</title>


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:title" content="Geometry" />
<meta name="twitter:description" content="">

<meta name="description" content="">


	<meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o">


<link rel="icon" href="/assets/favicon.png">
<link rel="apple-touch-icon" href="/assets/touch-icon.png">
<link href="https://fonts.googleapis.com/css?family=Karla" rel="stylesheet">
<link rel="stylesheet" href="/assets/core.css">
<link rel="canonical" href="/Geometry">
<link rel="alternate" type="application/atom+xml" title="Lei Zhou's Blog" href="/feed.xml" />




<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<style>
			#taglist {
				color: gray;
				margin: 0;
				margin-top: 16px;
				padding: 0;
				list-style-type: none;
				text-align: center;
				vertical-align: middle;
			}
			#taglist li {
				display: inline;
			}
			#taglist li + li:before {
				content: ", ";
			}
		</style>

		<!-- Google Tag Manager -->
		<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-T5S7PZV');</script>
		<!-- End Google Tag Manager -->
	</head>

	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T5S7PZV"
			height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
		<!-- End Google Tag Manager (noscript) -->

		
<aside class="logo">

	

	<a href="/">
		<img src="/images/avatar.jpeg" class="gravatar">
	</a>
	<span class="logo-prompt">Back to Home</span>

</aside>


		<main>
			<noscript>
	<style>
		article .footnotes {
			display: block;
		}
	</style>
</noscript>

<article>
	<div class="center">
		<h1>Geometry</h1>
		<time>April 4, 2018</time>
		<ul id="taglist">
			Tag:
			
				<li><a href="/tag_index.html" title="Notes">Notes</a></li>
			
		</ul>
	</div>

	<div class="divider"></div>

	<ul id="markdown-toc">
  <li><a href="#lie-groups-for-2d-and-3d-transformation" id="markdown-toc-lie-groups-for-2d-and-3d-transformation">Lie Groups for 2d and 3d Transformation</a>    <ul>
      <li><a href="#mathetical-notations" id="markdown-toc-mathetical-notations">Mathetical notations</a></li>
      <li><a href="#so3--so3" id="markdown-toc-so3--so3">SO(3) &amp; so(3)</a></li>
      <li><a href="#se3--se3" id="markdown-toc-se3--se3">SE(3) &amp; se(3)</a></li>
    </ul>
  </li>
  <li><a href="#quaternion" id="markdown-toc-quaternion">Quaternion</a></li>
  <li><a href="#essential--fundamental-matrix" id="markdown-toc-essential--fundamental-matrix">Essential &amp; Fundamental Matrix</a>    <ul>
      <li><a href="#derivation-of-essential-matrix" id="markdown-toc-derivation-of-essential-matrix">Derivation of Essential Matrix</a></li>
      <li><a href="#derivation-of-fundamental-matrix" id="markdown-toc-derivation-of-fundamental-matrix">Derivation of Fundamental Matrix</a></li>
    </ul>
  </li>
  <li><a href="#pnp" id="markdown-toc-pnp">PnP</a></li>
  <li><a href="#homography" id="markdown-toc-homography">Homography</a></li>
  <li><a href="#the-camera-is-the-measurement-of-angle" id="markdown-toc-the-camera-is-the-measurement-of-angle">“The camera is the measurement of angle.”</a></li>
  <li><a href="#matrices-in-cv" id="markdown-toc-matrices-in-cv">Matrices in CV</a></li>
  <li><a href="#reference" id="markdown-toc-reference">Reference</a></li>
</ul>

<h2 id="lie-groups-for-2d-and-3d-transformation">Lie Groups for 2d and 3d Transformation</h2>

<blockquote>
  <p>A <strong>Manifold</strong> is an n-Dimensional Topological Space that is locally Euclidean.</p>
</blockquote>

<p>A Lie group is a topological group that is also a smooth manifold. Each of them is associated with a Lie algebra which is a vector space. Transformations are required to be <strong>composed, inverted, differentiated and interpolated</strong>. Lie groups and their associated machinery address all these operations in a pricipled way.</p>

<blockquote>
  <p><strong>Definition.</strong> A nonempty subset <script type="math/tex">G \subset \mathbb{R}^{n\times n}</script> is called a Lie group if <script type="math/tex">g, h \in G \Rightarrow gh \in G</script> and <script type="math/tex">g \in G \Rightarrow det(g) \neq 0, g^{-1} \in G</script>.</p>
</blockquote>

<h3 id="mathetical-notations">Mathetical notations</h3>
<ul>
  <li>associative (结合律)- (ab)c=a(bc)</li>
  <li>Abelian (交换律)- abc = cba</li>
</ul>

<h3 id="so3--so3">SO(3) &amp; so(3)</h3>

<p>Elements of the 3D rotation group, SO(3), are represented by 3D rotation matrices. They are all orthogonal matrices with determinant <script type="math/tex">+1</script>.
The Lie algebra so(3), associated with SO(3), is the set of <script type="math/tex">3\times3</script> <strong>skew-symmetric or anti-symmetric</strong> matrices (i.e., <script type="math/tex">A^T=-A</script>).</p>

<p><strong>Infinitestimal generators</strong></p>

<p>The key idea introudced by Lie is that any finite transformation can be constructed by the repeated application or integration of infinitestimal (极微小的) transformation. 
The infinitestimal generators of so(3) correspond to the derivatives of rotation around the each of the standard axes, evaluated at the identity.
We take the the rotation by an angle <script type="math/tex">\phi</script> around x-axes as an example:</p>

<script type="math/tex; mode=display">% <![CDATA[
\mathbf{R}_1(\phi) = \begin{bmatrix} 1 & 0 & 0 \\ 0 & cos\phi & -sin\phi \\ 0 & sin\phi & cos\phi \end{bmatrix} . %]]></script>

<p>Its derivative w.r.t <script type="math/tex">\phi</script> evaluated at zero is written into</p>

<script type="math/tex; mode=display">% <![CDATA[
G_1 = \frac{\partial \mathbf{R}_1}{\partial \phi}|_{\phi=0} = \begin{bmatrix} 0 & 0 & 0 \\ 0 & 0 & -1 \\ 0 & 1 & 0 \end{bmatrix}. %]]></script>

<p>The three infinitestimal generators are derived as:</p>

<script type="math/tex; mode=display">% <![CDATA[
G_1 = \begin{bmatrix} 0 & 0 & 0 \\ 0 & 0 & -1 \\ 0 & 1 & 0 \end{bmatrix}, G_2 = \begin{bmatrix} 0 & 0 & 1 \\ 0 & 0 & 0 \\ -1 & 0 & 0 \end{bmatrix}, G_3 = \begin{bmatrix} 0 & -1 & 0 \\ 1 & 0 & 0 \\ 0 & 0 & 0 \end{bmatrix} %]]></script>

<p>An element of so(3) is then represented as the linear combination of the three generators:</p>

<script type="math/tex; mode=display">\mathbf{\omega} = [\omega_1, \omega_2, \omega_3]^T \in \mathbb{R}^3</script>

<script type="math/tex; mode=display">% <![CDATA[
\mathbf{\omega}_{\times} = \omega_1 G_1 + \omega_2 G_2 + \omega_3 G_3 = \begin{bmatrix} 0 & -\omega_3 & \omega_2 \\ \omega_3 & 0 & -\omega_1 \\ -\omega_2 & \omega_1 & 0 \end{bmatrix}  \in so(3) %]]></script>

<p>Since <script type="math/tex">G_1</script>, <script type="math/tex">G_2</script> and <script type="math/tex">G_3</script> are derivatives of rotations around three standard axises, <script type="math/tex">\omega</script> can be considered as the difference of a rotation from the identity.</p>

<p><strong>Properties</strong></p>
<ul>
  <li>
    <p>If <script type="math/tex">\omega_{\times} \in so(3)</script>, then <script type="math/tex">\mathbf{R} = e^{\omega_{\times}} \in SO(3)</script>. (See proof in [2])</p>
  </li>
  <li>
    <p>As a symmetric matrix, <script type="math/tex">\omega_{\times}^3 = -(\omega^T \omega) \cdot \omega_{\times} \triangleq -\theta^2 \omega_{\times}</script>. Here, <script type="math/tex">\theta = \sqrt{\omega_1^2 + \omega_2^2 + \omega_3^2}</script>. It means the cubic of a skew-symmetric matrix is also a skew-symmetric matrix.</p>
  </li>
  <li>
    <p>The eigenvalues of <script type="math/tex">\omega_{\times}</script> are <script type="math/tex">0, i\theta, -i\theta</script> (rank 2).</p>
  </li>
  <li>
    <p>The eigenvalues of <script type="math/tex">\mathbf{R} = e^{\omega_{\times}}</script> are <script type="math/tex">1, e^{i\theta}, e^{-i\theta}</script>.</p>
  </li>
  <li>
    <p><script type="math/tex">\mathbf{R}</script> is a rotation by angle <script type="math/tex">\theta</script> around an axis. The axis is the engenvector of <script type="math/tex">\omega_{\times}</script> corresponding to eigenvalue <script type="math/tex">0</script>, i.e., <script type="math/tex">[\omega_1, \omega_2, \omega_3]^T</script>.</p>
  </li>
  <li>
    <p>The addition of <script type="math/tex">\omega</script> corresponds to the multiplication of <script type="math/tex">\mathbf{R}</script>. <script type="math/tex">\mathbf{\omega}_{\times} = \omega_1 G_1 + \omega_2 G_2 + \omega_3 G_3</script> means the addition of a rotation by <script type="math/tex">\omega_1</script> around x-axis, a rotation by <script type="math/tex">\omega_2</script> around y-axis and a rotation by <script type="math/tex">\omega_3</script> around z-axis.</p>
  </li>
</ul>

<h3 id="se3--se3">SE(3) &amp; se(3)</h3>

<p>The group of rigid transformation in 3D space is SE(3). It is represented by a <script type="math/tex">4\times4</script> matrix:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{bmatrix} \mathbf{R} & \mathbf{t} \\ \mathbf{0} & 1 \end{bmatrix}. %]]></script>

<p>There are six infinitestimal generators of Lie algebra se(3), which correspond to differential translations and rotations:</p>

<script type="math/tex; mode=display">% <![CDATA[
G_1 = \begin{bmatrix} 0 & 0 & 0 & 1 \\ 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0 \\0 & 0 & 0 & 0 \end{bmatrix}, G_2 = \begin{bmatrix} 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & 1 \\ 0 & 0 & 0 & 0 \\0 & 0 & 0 & 0 \end{bmatrix}, G_3 = \begin{bmatrix} 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & 1 \\0 & 0 & 0 & 0 \end{bmatrix}, %]]></script>

<script type="math/tex; mode=display">% <![CDATA[
G_4 = \begin{bmatrix} 0 & 0 & 0 & 0 \\ 0 & 0 & -1 & 0 \\ 0 & 1 & 0 & 0 \\0 & 0 & 0 & 0 \end{bmatrix},
G_5 = \begin{bmatrix} 0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 0 \\ -1 & 0 & 0 & 0 \\0 & 0 & 0 & 0 \end{bmatrix},
G_6 = \begin{bmatrix} 0 & -1 & 0 & 0 \\ 1 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0 \\0 & 0 & 0 & 0 \end{bmatrix}. %]]></script>

<p>An element of se(3) is then represented by linear combination of these generators:</p>

<script type="math/tex; mode=display">u_1G_1 + u_2G_2 + u_3 G_3 + \omega_1 G_4 + \omega_2 G_5 + \omega_3 G_6 \in se(3)</script>

<h2 id="quaternion">Quaternion</h2>

<p><a href="http://people.csail.mit.edu/bkph/papers/Absolute_Orientation.pdf">http://people.csail.mit.edu/bkph/papers/Absolute_Orientation.pdf</a></p>

<h2 id="essential--fundamental-matrix">Essential &amp; Fundamental Matrix</h2>

<h3 id="derivation-of-essential-matrix">Derivation of Essential Matrix</h3>

<p><img src="/images/essential_mat.png" alt="dilated_conv" /></p>

<p>As shown in Figure above, we have two left and right cameras with camera centers <script type="math/tex">O_l</script> and <script type="math/tex">O_r</script>. <script type="math/tex">P</script> is a 3D point co-visible in two cameras. We have notations as follows: <script type="math/tex">P_l</script> is the 3D coordinate of <script type="math/tex">P</script> in local space of camera <script type="math/tex">O_l</script> and <script type="math/tex">P_r</script> is the 3D coordinate of <script type="math/tex">P</script> in local space of camera <script type="math/tex">O_r</script>. <script type="math/tex">T</script> is the 3D coordinate of <script type="math/tex">O_r</script> in local space of camera <script type="math/tex">O_l</script>. The rotation and translation from camera <script type="math/tex">O_l</script> to camera <script type="math/tex">O_r</script> are <script type="math/tex">R</script> and <script type="math/tex">t</script> respectively. Apparently we have</p>

<script type="math/tex; mode=display">\begin{cases} R P_l + t = P_r \\ R T + t = 0 \end{cases}.</script>

<p>Thus, we obtain <script type="math/tex">t = -RT</script> and <script type="math/tex">P_r = R(P_l - T)</script>.</p>

<p>Then, the equation can be derived</p>

<script type="math/tex; mode=display">P_r^T R T_{\times} P_l = 0,</script>

<p>because <script type="math/tex">P_r^T R = (P_l - T)^T</script> and <script type="math/tex">T_{\times} P_l</script> equals to the cross product of vector <script type="math/tex">T</script> and <script type="math/tex">P_l</script>. Therefore, the two terms are orthogonal to each other. <script type="math/tex">R T_{\times}</script> is exactly the essential matrix <script type="math/tex">E=R T_{\times}</script> and <script type="math/tex">P_r^T E P_l = 0</script>. <script type="math/tex">P_l</script> and <script type="math/tex">P_r</script> are essentially two viewing rays in local space of two cameras.</p>

<p>The <script type="math/tex">R</script> and <script type="math/tex">T</script> have six degrees of freedom. The essential matrix has five degree of freedom by eliminating the common scaling.</p>

<h3 id="derivation-of-fundamental-matrix">Derivation of Fundamental Matrix</h3>

<p>Rather than using the camera coordinates, the equation above can be extended to image coordinates, because</p>

<script type="math/tex; mode=display">\begin{cases} p_l = K_l P_l \\ p_r = K_r P_r \end{cases},</script>

<p>where <script type="math/tex">p_l</script> and <script type="math/tex">p_r</script> use homogeneous coordinates and <script type="math/tex">K_l</script> and <script type="math/tex">K_r</script> are intrinsics of left and right cameras. Then the equation <script type="math/tex">P_r^T E P_l = 0</script> can be written into</p>

<script type="math/tex; mode=display">p_r^T K_r^{-T} E K_l^{-1} p_l = p_r^T F p_l = 0.</script>

<p><script type="math/tex">F = K_r^{-T} E K_l^{-1}</script> is called the fundamental matrix.</p>

<p>The fundamental matrix has rank 2. Since all the epipolar lines go through the epipole, e.g. in the left image <script type="math/tex">e_l</script>, we have <script type="math/tex">Fe_l = 0</script>. Hence <script type="math/tex">F</script> has a null space which is not just the zero vector. So <script type="math/tex">F</script> is rank 2.</p>

<p>The <script type="math/tex">3 \times 3</script> homogeneous fundamental matrix has seven degrees of freedom. The common scaling removes one degree and the constraint <script type="math/tex">det F = 0</script> (rank=2) removes another one.</p>

<h2 id="pnp">PnP</h2>

<p><a href="/image-localization">PnP</a></p>

<h2 id="homography">Homography</h2>

<blockquote>
  <p>For any choice of intrinsic parameters, any homography can be realized between two views by some positioning of the two views and a plane.</p>
</blockquote>

<h2 id="the-camera-is-the-measurement-of-angle">“The camera is the measurement of angle.”</h2>

<h2 id="matrices-in-cv">Matrices in CV</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center">DoF</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Projection matrix</td>
      <td style="text-align: center">11</td>
    </tr>
    <tr>
      <td style="text-align: center">Fundamental matrix</td>
      <td style="text-align: center">7</td>
    </tr>
    <tr>
      <td style="text-align: center">Essential matrix</td>
      <td style="text-align: center">5</td>
    </tr>
    <tr>
      <td style="text-align: center">Homograpy matrix</td>
      <td style="text-align: center">8</td>
    </tr>
    <tr>
      <td style="text-align: center">Affine transform (2d)</td>
      <td style="text-align: center">6</td>
    </tr>
    <tr>
      <td style="text-align: center">Affine transform (Nd)</td>
      <td style="text-align: center">(N+1)*N</td>
    </tr>
    <tr>
      <td style="text-align: center">Similarity transform (2d)</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">Similarity transform (3d)</td>
      <td style="text-align: center">7</td>
    </tr>
  </tbody>
</table>

<h2 id="reference">Reference</h2>

<p>[1] <a href="http://ethaneade.com/lie.pdf">http://ethaneade.com/lie.pdf</a></p>

<p>[2] <a href="https://www.youtube.com/watch?v=uILYfubYxd0">Mathetical elucidation of SO(3) and so(3)</a></p>

<p>[3] <a href="http://www.cmth.ph.ic.ac.uk/people/d.vvedensky/groups/Chapter7.pdf">http://www.cmth.ph.ic.ac.uk/people/d.vvedensky/groups/Chapter7.pdf</a></p>

<p>[4] <a href="http://www.cse.psu.edu/~rtc12/CSE486/lecture19.pdf">Essential and Fundamental Matrices</a></p>


</article>

<div class="page-navigation">
	
    <a class="next" href="/monte-carlo-methods" title="NEXT: Monte Carlo Methods">&lt;&lt;</a>
		<span> &middot; </span>
  
		<a class="home" href="/" title="Back to Homepage">Home</a>
  
		<span> &middot; </span>
    <a class="prev" href="/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0" title="PREV: 读书笔记">&gt;&gt;</a>
  
</div>

		</main>
                                                      

		<div class="footer">
<!--  <span class="block">Made with &hearts; using <a href="http://jekyllrb.com/">Jekyll</a> &amp; <a href="https://github.com/heiswayi/the-plain" title="Lei's Blog">The Plain</a> &middot; &lt;/&gt; on <a href="https://github.com/zlthinker" title="Hosted on GitHub">GitHub</a></span> -->
  <span class="block">&copy; 2018 Lei ZHOU</span>
</div>


		

			

		

		<!-- hit counter -->
		<br>
		<center>
		<img src="http://hitwebcounter.com/counter/counter.php?page=6818827&style=0024&nbdigits=5&type=ip&initCount=0" align="top" title="" Alt=""   border="1" height=18px/>    
		</center>  

	</body>

</html>
